{% extends "base.html" %} {% block content %}

<script defer src="/static/js/script1.js"></script>
<script defer src="/static/js/template.js"></script>

<h5 class="section-header">Add New User</h5>
<div class="data-frame">
  <div class="frame">
    <div class="sections">
      <table class="code_table table-striped table-bordered">
        <thead>
          <tr>
            <th>Role</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Password</th>
            <th>Email ID</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <select
                class="text-field"
                name="Role"
                id="Role"
                style="width: 100%"
              >
                <option value="admin">Admin</option>
                <option value="analyst">Service</option>
              </select>
            </td>
            <td>
              <input type="text" name="fname" value="" class="text-field" />
            </td>
            <td>
              <input type="text" name="lname" value="" class="text-field" />
            </td>
            <td>
              <input type="password" name="pwd" value="" class="text-field" />
            </td>
            <td>
              <input
                type="text"
                name="email"
                value="pinpointengineers@hotmail.com"
                class="text-field"
              />
            </td>
            <td class="del-row">
              <span class="delete-row" onclick="delete_row(this)">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  height="0.625em"
                  viewBox="0 0 512 512"
                >
                  <style>
                    svg {
                      fill: #ff0000;
                    }
                  </style>
                  <path
                    d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM184 232H328c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"
                  />
                </svg>
              </span>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="add-row-button">
        <button
          id="add_row1"
          type="button"
          class="btn col-sm-2 btn-row"
          onclick="add_row(this)"
        >
          Add Row
        </button>
      </div>
      <hr size="10" />
    </div>
  </div>
</div>
<hr size="10" />
<div id="action-row">
  <button
    id="submit_button"
    type="submit"
    class="btn btn-sm btn-success col-sm-2 add_user-btn"
    onclick="confirmAddUsers()"
  >
    Add User
  </button>
</div>

<div id="confirmationModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeConfirmationModal()">&times;</span>
    <p class="confirmation-text">Are you sure you want to add the user(s)?</p>
    <div class="button-container">
      <button
        id="confirmButton"
        class="confirm-button"
        onclick="addUsersAndCloseModal()"
      >
        Confirm
      </button>
      <button
        id="cancelButton"
        class="cancel-button"
        onclick="closeConfirmationModal()"
      >
        Cancel
      </button>
    </div>
  </div>
</div>

<script>
  $(document).ready(function () {
    var role = "{{ role }}";
    handle_nav_bar(role);
  });

  function confirmAddUsers() {
    var modal = document.getElementById("confirmationModal");
    modal.style.display = "flex";
  }

  function closeConfirmationModal() {
    var modal = document.getElementById("confirmationModal");
    modal.style.display = "none";
  }

  function addUsersAndCloseModal() {
    add_users();
    closeConfirmationModal();
  }
</script>
{% endblock %}
